<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.18" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme='dark'] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background-color: var(--vp-c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme')
      const systemDarkMode =
        'matchMedia' in window
          ? window.matchMedia('(prefers-color-scheme: dark)').matches
          : false

      if (userMode === 'light') {
        document.documentElement.dataset.theme = 'light'
      } else if (userMode === 'dark' || systemDarkMode) {
        document.documentElement.dataset.theme = 'dark'
      }
    </script>
    <meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><title>Intel NUC | IQR Lab Docs</title><meta name="description" content="">
    <link rel="preload" href="/docs/assets/style-BMhiwD7j.css" as="style"><link rel="stylesheet" href="/docs/assets/style-BMhiwD7j.css">
    <link rel="modulepreload" href="/docs/assets/app-Bueb5E3k.js"><link rel="modulepreload" href="/docs/assets/intel-nuc.html-jJotybz9.js">
    <link rel="prefetch" href="/docs/assets/index.html-CS4R7DfF.js" as="script"><link rel="prefetch" href="/docs/assets/intel-realsense.html-CofvjaBv.js" as="script"><link rel="prefetch" href="/docs/assets/kalibr.html-DAUURGfm.js" as="script"><link rel="prefetch" href="/docs/assets/pointcloud-stitching.html-BXE1RvY7.js" as="script"><link rel="prefetch" href="/docs/assets/intro.html-DMrlakvZ.js" as="script"><link rel="prefetch" href="/docs/assets/index.html-Bmozg2Lj.js" as="script"><link rel="prefetch" href="/docs/assets/intro.html-DISpmKs6.js" as="script"><link rel="prefetch" href="/docs/assets/intro.html-BG2RVeQi.js" as="script"><link rel="prefetch" href="/docs/assets/index.html-Cdxv6cSC.js" as="script"><link rel="prefetch" href="/docs/assets/404.html-COyKJpuW.js" as="script"><link rel="prefetch" href="/docs/assets/setupDevtools-7MC2TMWH-CSioIz0g.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="vp-theme-container external-link-icon" vp-container><!--[--><header class="vp-navbar" vp-navbar><div class="vp-toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a class="route-link" href="/docs/"><!----><span class="vp-site-name" aria-hidden="true">IQR Lab Docs</span></a></span><div class="vp-navbar-items-wrapper" style=""><!--[--><!--]--><nav class="vp-navbar-items vp-hide-mobile" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="auto-link external-link" href="https://github.com/iqr-lab/docs" aria-label="GitHub" rel="noopener noreferrer" target="_blank"><!---->GitHub<!----></a></div><!--]--></nav><!--[--><!--]--><button type="button" class="vp-toggle-color-mode-button" title="toggle color mode"><svg class="light-icon" viewbox="0 0 32 32" style=""><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg class="dark-icon" viewbox="0 0 32 32" style="display:none;"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><form class="search-box" role="search"><input type="search" autocomplete="off" spellcheck="false" value><!----></form></div></header><!--]--><div class="vp-sidebar-mask"></div><!--[--><aside class="vp-sidebar" vp-sidebar><nav class="vp-navbar-items" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="auto-link external-link" href="https://github.com/iqr-lab/docs" aria-label="GitHub" rel="noopener noreferrer" target="_blank"><!---->GitHub<!----></a></div><!--]--></nav><!--[--><!--]--><ul class="vp-sidebar-items"><!--[--><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading" href="/docs/" aria-label="Introduction"><!---->Introduction<!----></a><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/docs/" aria-label="IQR Lab Docs"><!---->IQR Lab Docs<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading active">Computer Vision <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link route-link-active auto-link vp-sidebar-item active" href="/docs/computer-vision/intel-nuc.html" aria-label="Intel NUC"><!---->Intel NUC<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/docs/computer-vision/intel-realsense.html" aria-label="Intel RealSense"><!---->Intel RealSense<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/docs/computer-vision/kalibr.html" aria-label="Kalibr"><!---->Kalibr<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/docs/computer-vision/pointcloud-stitching.html" aria-label="Pointcloud Stitching for IQR Lab"><!---->Pointcloud Stitching for IQR Lab<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading">Vention <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/docs/vention/intro.html" aria-label="Introduction [Under Construction]"><!---->Introduction [Under Construction]<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading">Kinova <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/docs/kinova/intro.html" aria-label="Introduction [Under Construction]"><!---->Introduction [Under Construction]<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading">Website <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/docs/website/intro.html" aria-label="Adding a new lab member"><!---->Adding a new lab member<!----></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="vp-page"><!--[--><!--]--><div class="theme-default-content" vp-content><!--[--><!--]--><div><h1 id="intel-nuc" tabindex="-1"><a class="header-anchor" href="#intel-nuc"><span>Intel NUC</span></a></h1><p>This document covers all initial setup details for each NUC edge device in the distributed pointcloud stitching system.</p><h2 id="prerequisite" tabindex="-1"><a class="header-anchor" href="#prerequisite"><span>Prerequisite</span></a></h2><ol><li>Disable Secure Boot in UEFI (F2 hotkey at POST)</li><li>Enable Display Emulation under Advanced -&gt; Video in UEFI</li><li>An Internet Connection</li></ol><h2 id="ubuntu" tabindex="-1"><a class="header-anchor" href="#ubuntu"><span>Ubuntu</span></a></h2><p>As of the time of writing, it is simplest to install <a href="https://old-releases.ubuntu.com/releases/22.04.3/" target="_blank" rel="noopener noreferrer">Ubuntu 22.04.3</a> specifically. This is because it comes installed with kernel 6.2, which is by default supported by the Intel Realsense distribution builds. It is safest to avoid updating system components and software after initial OS installation, since <code>librealsense</code> is dependent on kernel modules and RustDesk uses virtual display emulation.</p><h2 id="intel-realsense" tabindex="-1"><a class="header-anchor" href="#intel-realsense"><span>Intel Realsense</span></a></h2><p>Ensure that your kernel version (<code>uname -r</code>) is supported by the <code>librealsense-dkms</code> package <a href="https://github.com/IntelRealSense/librealsense/blob/master/doc/distribution_linux.md#using-pre-build-packages" target="_blank" rel="noopener noreferrer">here</a>.</p><p>If not, please follow the following section on downgrading your kernel <strong>BEFORE</strong> installing <code>librealsense</code>.</p><p>Please install <code>librealsense</code> from distribution following <a href="https://iqr.cs.yale.edu/docs/computer-vision/intel-realsense.html" target="_blank" rel="noopener noreferrer">Intel Realsense</a>. Note the manual installation step required for NUCs only.</p><h2 id="kernel-downgrade" tabindex="-1"><a class="header-anchor" href="#kernel-downgrade"><span>Kernel Downgrade</span></a></h2><ol><li><p>Install Mainline</p><blockquote><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">sudo</span> apt-add-repository <span class="token parameter variable">-y</span> ppa:cappelikan/ppa</span>
<span class="line"></span>
<span class="line"><span class="token function">sudo</span> <span class="token function">apt</span> update</span>
<span class="line"></span>
<span class="line"><span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> mainline</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote></li><li><p>Install the downgraded kernel via the Mainline GUI App</p></li><li><p>Reboot and hold <code>Esc</code> to access the GRUB menu</p><p>Hint: If you held <code>Esc</code> for too long (which is very likely), you will enter the GRUB prompt instead. Execute <code>normal</code>, then tap <code>Esc</code> until the menu shows up</p></li><li><p>Boot from the downgraded kernel in the Advanced Ubuntu Boot Options</p></li><li><p>Uninstall any newer kernels from Mainline so that Ubuntu boots to the downgraded kernel by default.</p><p>Hint: You may need to uninstall some <code>generic-hwe</code> image/headers packages before this step. If this is the case, use</p><blockquote><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">dpkg <span class="token parameter variable">--list</span> <span class="token operator">|</span> <span class="token function">grep</span> linux-image <span class="token comment"># to find the exact package name of linux-image-xxx</span></span>
<span class="line"><span class="token function">sudo</span> <span class="token function">apt-get</span> purge linux-image-xxx</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div></blockquote></li></ol><h2 id="networking" tabindex="-1"><a class="header-anchor" href="#networking"><span>Networking</span></a></h2><p>We establish <strong><code>i</code></strong> as the corresponding device number, indexed by 1.</p><p>Ensure that the ethernet cable is connected to a port with a native <code>Vision Subnet</code> tag. For exact port mappings, please check the UniFi controller configuration. As of the time of writing, the top row of the 2.5Gbps ports are all natively tagged to the <code>Vision Subnet</code></p><h3 id="ip-address-assignment" tabindex="-1"><a class="header-anchor" href="#ip-address-assignment"><span>IP Address Assignment</span></a></h3><p>The easiest way to configure manual IP assignment is through the Settings app. Please configure a wired IPv4 profile with the following specs:</p><ul><li>IPv4 Method: Manual</li><li>Address: <code>192.168.2.[7 + i]</code></li><li>Netmask: <code>255.255.255.0</code></li><li>Gateway: <code>192.168.2.1</code></li></ul><h3 id="hostname" tabindex="-1"><a class="header-anchor" href="#hostname"><span>Hostname</span></a></h3><p>For ease of access, please configure the hostname as necessary.</p><blockquote><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">hostnamectl set-hostname iqr-vision-i</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></blockquote><p>Additionally, you may find it beneficial down the line to physically label the NUCs with their corresponding index. Please use the label maker as necessary.</p><h2 id="remote-access" tabindex="-1"><a class="header-anchor" href="#remote-access"><span>Remote Access</span></a></h2><h3 id="ssh" tabindex="-1"><a class="header-anchor" href="#ssh"><span>SSH</span></a></h3><p>Please follow standard SSH key generation (<code>ssh-keygen</code>) and installation methods (<code>ssh-copy-id</code>). Since we have already set the hostname, it should be used as <code>iqr-vision-i.local</code> when using <code>ssh</code>.</p><p>Please also modify <code>~/.ssh/config</code> with the proper host configuration. Doing this avoids having to specify the SSH key in the <code>ssh</code> connect command. This is an important step as the <code>host.py</code> utility assumes this.</p><p>If you are expecting to do active development on <code>pointcloud_stitching</code>, please see <a href="https://iqr.cs.yale.edu/docs/computer-vision/pointcloud-stitching.html#camera-edge-server" target="_blank" rel="noopener noreferrer">this section</a> on setting up the central computer FS mount.</p><h3 id="remote-desktop" tabindex="-1"><a class="header-anchor" href="#remote-desktop"><span>Remote Desktop</span></a></h3><p>The remote desktop software of choice is RustDesk.</p><p>There are variety of reasons for this choice over AnyDesk but the following are the critical ones:</p><ul><li>Virtual Display Compatibility <ul><li>AnyDesk throws an Unsupported Display Server error under headless operation</li></ul></li><li>Speed &amp; Performance <ul><li>RustDesk empirically displays significantly lower input latency and higher visual quality</li></ul></li></ul><h4 id="installation-configuration" tabindex="-1"><a class="header-anchor" href="#installation-configuration"><span>Installation &amp; Configuration</span></a></h4><ol><li><p>Follow the <a href="https://rustdesk.com/docs/en/client/linux/" target="_blank" rel="noopener noreferrer">reference install steps</a></p></li><li><p>Once installed, open RustDesk and set a permanent password under the Security tab</p><p>Hint: It is usually set to the <code>lab</code> password but capatalized</p></li><li><p><a href="https://rustdesk.com/docs/en/client/linux/#login-screen" target="_blank" rel="noopener noreferrer">Disable Wayland login</a></p></li></ol><h2 id="environment-setup" tabindex="-1"><a class="header-anchor" href="#environment-setup"><span>Environment setup</span></a></h2><p>Although most of the choices here are a matter of personal perference from experience, it is best to make all edge device environments consistent to avoid unnecessary headaches.</p><h3 id="shell" tabindex="-1"><a class="header-anchor" href="#shell"><span>Shell</span></a></h3><p>The shell of choice is <code>fish</code>. Please install <code>fish</code> following the instructions <a href="https://launchpad.net/~fish-shell/+archive/ubuntu/release-3" target="_blank" rel="noopener noreferrer">here</a>. To set it as the default shell, run <code>chsh -s $(which fish)</code> inside <code>bash</code>.</p><p>To make <code>fish</code> more extensible, we additionally install Oh My Fish (<code>omf</code>) and Bass. Please install sequentially by following instructions <a href="https://github.com/oh-my-fish/oh-my-fish?tab=readme-ov-file#installation" target="_blank" rel="noopener noreferrer">here</a> then <a href="https://github.com/edc/bass?tab=readme-ov-file#with-oh-my-fish" target="_blank" rel="noopener noreferrer">here</a>.</p><h3 id="python" tabindex="-1"><a class="header-anchor" href="#python"><span>Python</span></a></h3><p>For Python, there is no need to complicate the installation environments of the edge device with <code>conda</code>. The <code>python3</code> interpreter should automatically be installed from the distribution package manager.</p><p>Please note that <code>python</code> does not and should not resolve (unless the virtual environment is activated).</p><h3 id="uv" tabindex="-1"><a class="header-anchor" href="#uv"><span>UV</span></a></h3><h4 id="installation-configuration-1" tabindex="-1"><a class="header-anchor" href="#installation-configuration-1"><span>Installation &amp; Configuration</span></a></h4><p>We use <code>uv</code> over <code>pip</code> as the Python package manager of choice. Please install it by following the instructions <a href="https://github.com/astral-sh/uv?tab=readme-ov-file#getting-started" target="_blank" rel="noopener noreferrer">here</a>. When it comes to augmenting the shell startup file, please add the following line to <code>~/.config/fish/config.fish</code>:</p><blockquote><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">bass <span class="token builtin class-name">.</span> <span class="token string">&quot;<span class="token environment constant">$HOME</span>/.cargo/env&quot;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></blockquote><p>Please restart your shell session for <code>uv</code> to be available.</p><h3 id="usage" tabindex="-1"><a class="header-anchor" href="#usage"><span>Usage</span></a></h3><p>As a general rule of thumb, create virtual environments whenever starting new Python projects. The location of the virtual environment is up to your discretion, but do create meaningful names for them.</p><p>For example, the calibration Python venv is named <code>~/calibration_venv</code>. Specify the name of the venv upon creation like so:</p><blockquote><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">uv venv <span class="token punctuation">[</span>venv_path<span class="token punctuation">]</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></blockquote><p>Activate the desired virtual venv when needed like so:</p><blockquote><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token builtin class-name">source</span> <span class="token punctuation">[</span>venv_path<span class="token punctuation">]</span>/bin/activate.fish</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></blockquote><h2 id="conclusion" tabindex="-1"><a class="header-anchor" href="#conclusion"><span>Conclusion</span></a></h2><p>Upon successful setup, make sure to update <code>pointcloud_stitching/HOSTS</code> with the new hostname.</p></div><!--[--><!--]--></div><footer class="vp-page-meta"><div class="vp-meta-item edit-link"><a class="auto-link external-link label" href="https://github.com/iqr-lab/docs/edit/main/computer-vision/intel-nuc.md" aria-label="Edit this page" rel="noopener noreferrer" target="_blank"><!--[--><svg class="edit-icon" viewbox="0 0 1024 1024"><g fill="currentColor"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></g></svg><!--]-->Edit this page<!----></a></div><div class="vp-meta-item git-info"><div class="vp-meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="vp-meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: song.neil.song@gmail.com">Neil Song</span><!----><!--]--><!--]--></span></div></div></footer><nav class="vp-page-nav" aria-label="page navigation"><!----><a class="route-link auto-link next" href="/docs/computer-vision/intel-realsense.html" aria-label="Intel RealSense"><div class="hint">Next <span class="arrow right"></span></div><div class="link"><span>Intel RealSense</span></div></a></nav><!--[--><!--]--></main><!--]--></div><!--[--><!----><!--]--><!--]--></div>
    <script type="module" src="/docs/assets/app-Bueb5E3k.js" defer></script>
  </body>
</html>
